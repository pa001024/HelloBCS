// 百度网页版直链下载(with lib v1.0.0) v1.0.1 (minify)
var B={getMetaAsync:function(a){var b="/api/filemetas?blocks=1&dlink=1",c=Promise.defer();return $.post(b,{target:JSON.stringify([a])},function(a){a.errno?c.reject(a):c.resolve(a.info[0])}),c.promise},transferFileAsync:function(a,b,c,d){var e="/share/transfer",f=Promise.defer();return $.post(e+"?shareid="+a+"&from="+b,{filelist:JSON.stringify(["/"+c]),path:d},function(a){f.resolve(a)}),f.promise},createDirAsync:function(a){var b="/api/create?a=commit",c=Promise.defer();return $.post(b,{path:"/"+a,isdir:1,size:"",block_list:"[]",method:"post"},function(a){a.errno?c.reject(a):c.resolve(a)}),c.promise}};!function(){function b(b,c){a.show({mode:b?"success":"caution",msg:c,autoClose:!1})}function d(a,c){var d=downFileButton||document.createElement("a");d.rel="noreferrer",d.download=a,d.href=c,b(1,"\u76f4\u94fe\u8f6c\u5316\u6210\u529f \u70b9\u51fb\u4e0b\u8f7d\u6309\u94ae\u6216\u53f3\u952e\u590d\u5236\u94fe\u63a5\u5230\u4e0b\u8f7d\u5de5\u5177\u8fdb\u884c\u4e0b\u8f7d")}function e(){B.transferFileAsync(yunData.SHARE_ID,yunData.SHARE_UK,yunData.PATH,c).then(function(a){return B.getMetaAsync(c+"/"+yunData.FILENAME)},function(){b(0,"\u03a3(\u2299\u25bd\u2299|||... \u672a\u77e5\u9519\u8bef")}).then(function(a){d(a.server_filename,a.dlink)},function(){b(0,"\u03a3(\u2299\u25bd\u2299|||... \u672a\u77e5\u9519\u8bef")})}if("object"!=typeof yunData)return alert('\u03a3(\u2299\u25bd\u2299"a...\u5f53\u524d\u4e0d\u662f\u5206\u4eab\u9875\u9762\u6216\u8005\u9875\u9762\u52a0\u8f7d\u4e0d\u6b63\u786e\n\u8bf7\u5237\u65b0\u9875\u9762\u518d\u8bd5\u54e6');if(!yunData.MYUK)return alert("_(\uffe30\uffe3)_~ \u8bf7\u767b\u5f55\u540e\u518d\u8fdb\u884c\u64cd\u4f5c");var a=require("disk-system:widget/system/uiService/tip/tip.js");if(yunData.FILENAME){var c="/tmp";B.getMetaAsync("/tmp").then(e,function(a){-9==a.info[0].errno?B.createDirAsync("/tmp").then(e):b(0,"\u03a3(\u2299\u25bd\u2299|||... \u672a\u77e5\u9519\u8bef")})}else{var c=unescape(decodeURI(location.hash)).replace(/^(?:#list\/path=\/?)?/,"/"),f=$(".item-active:first .filename").attr("title");if(!f)return b(0,'~~ -______-" \u8bf7\u9009\u4e2d\u6587\u4ef6');if("dir"==$(".item-active:first").data("extname"))return b(0,"\u4e0d\u652f\u6301\u6587\u4ef6\u5939");B.getMetaAsync(c+"/"+f).then(function(a){b(1,'\u76f4\u94fe\u8f6c\u5316\u6210\u529f <a rel="noreferrer" download="'+f+'" href="'+a.dlink+'">\u70b9\u51fb\u4e0b\u8f7d</a>(\u6216\u590d\u5236\u5230\u4e0b\u8f7d\u5de5\u5177)')},function(a){b(0,"\u76f4\u94fe\u8f6c\u5316\u5931\u8d25 errno="+a.errno)})}}();