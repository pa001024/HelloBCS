function hellobdp(){function c(b,c){var d=document.getElementById("downFileButton")||document.createElement("a");d.rel="noreferrer",d.download=b,d.href=c,a(1,"\u76f4\u94fe\u8f6c\u5316\u6210\u529f \u70b9\u51fb\u4e0b\u8f7d\u6309\u94ae\u6216\u53f3\u952e\u590d\u5236\u94fe\u63a5\u5230\u4e0b\u8f7d\u5de5\u5177(\u63a8\u8350\u4f7f\u7528IDM)\u8fdb\u884c\u4e0b\u8f7d")}function d(){B.transferFileAsync(yunData.SHARE_ID,yunData.SHARE_UK,yunData.PATH,b).then(function(a){return B.getMetaAsync(b+"/"+yunData.FILENAME)},function(){a(0,"\u03a3(\u2299\u25bd\u2299|||... \u672a\u77e5\u9519\u8bef")}).then(function(a){c(a.server_filename,a.dlink)},function(){a(0,"\u03a3(\u2299\u25bd\u2299|||... \u672a\u77e5\u9519\u8bef")})}if("object"!=typeof yunData)return alert('\u03a3(\u2299\u25bd\u2299"a...\u5f53\u524d\u4e0d\u662f\u5206\u4eab\u9875\u9762\u6216\u8005\u9875\u9762\u52a0\u8f7d\u4e0d\u6b63\u786e\n\u8bf7\u5237\u65b0\u9875\u9762\u518d\u8bd5\u54e6');if(!yunData.MYUK)return alert("_(\uffe30\uffe3)_~ \u8bf7\u767b\u5f55\u540e\u518d\u8fdb\u884c\u64cd\u4f5c");var a=function(){try{var a=require("disk-system:widget/system/uiService/tip/tip.js");if(a)return function(b,c){a.show({mode:b?"success":"caution",msg:c,autoClose:!1})}}catch(b){}try{var c=require("common:widget/toast/toast.js");if(c)return function(a,b){c.obtain.useToast({toastMode:a?c.obtain.MODE_SUCCESS:c.obtain.MODE_FAILURE,msg:b,sticky:!0,position:4096,closeType:!0})}}catch(b){}return function(a,b){function c(a){var b="data:text/html;charset=utf-8,";open(b+a,"newwindow","height=400,width=800")}c(b)}}();if(yunData.FILENAME){var b="/tmp";B.getMetaAsync("/tmp").then(d,function(b){-9==b.info[0].errno?B.createDirAsync("/tmp").then(d):a(0,"\u03a3(\u2299\u25bd\u2299|||... \u672a\u77e5\u9519\u8bef")})}else{var b=unescape(decodeURI(location.hash)).replace(/^(?:#list\/path=\/?)?/,"/"),e=$(".item-active:first .filename").attr("title");if(!e)return a(0,'~~ -______-" \u8bf7\u9009\u4e2d\u6587\u4ef6');if("dir"==$(".item-active:first").data("extname"))return a(0,"\u4e0d\u652f\u6301\u6587\u4ef6\u5939");B.getMetaAsync(b+"/"+e).then(function(b){a(1,'\u76f4\u94fe\u8f6c\u5316\u6210\u529f <a rel="noreferrer" download="'+e+'" href="'+b.dlink+'">\u70b9\u51fb\u4e0b\u8f7d</a>(\u6216\u590d\u5236\u5230\u4e0b\u8f7d\u5de5\u5177(\u63a8\u8350\u4f7f\u7528IDM))')},function(b){a(0,"\u76f4\u94fe\u8f6c\u5316\u5931\u8d25 errno="+b.errno)})}}var B={getMetaAsync:function(a){var b="/api/filemetas?blocks=1&dlink=1";return new Promise(function(c,d){$.post(b,{target:JSON.stringify([a])},function(a){a.errno?d(a):c(a.info[0])})})},transferFileAsync:function(a,b,c,d){var e="/share/transfer";return new Promise(function(f,g){$.post(e+"?shareid="+a+"&from="+b,{filelist:JSON.stringify([(c.startsWith("/")?"":"/")+c]),path:d},function(a){f(a)})})},createDirAsync:function(a){var b="/api/create?a=commit";return new Promise(function(c,d){$.post(b,{path:"/"+a,isdir:1,size:"",block_list:"[]",method:"post"},function(a){a.errno?d(a):c(a)})})}};hellobdp();